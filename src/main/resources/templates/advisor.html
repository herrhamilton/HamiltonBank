<!DOCTYPE html>
<html lang="de" xmlns:th="http://www.thymeleaf.org">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <meta charset="UTF-8">
    <title>Beraterübersicht</title>
</head>

<body class="bg-light" style="margin-top: 80px">

<div th:replace="fragments/header_authenticated :: header"></div>

<!--TODO wenn niemand wartet-->
<div class="col-md-8 offset-md-2">
    <p th:if="${acceptFailed}">Anfrage konnte nicht angenommen werden. Bitte versuchen Sie es später erneut.</p>
    <p>Momentan warten folgende Kunden auf ein Gespräch:</p>
    <table>
        <tr>
            <th>Kunde</th>
            <th>Grund</th>
            <th>wartet seit</th>
        </tr>
        <tr th:each="consulting : ${consultingRequests}">
            <td th:text="${consulting.customer}"></td>
            <td th:text="${consulting.reason}"></td>
            <td th:text="${#calendars.format(consulting.requestTime,'HH:mm')} + ' Uhr'"></td>
            <td>
                <form th:action="@{/consulting/accept/{consultingId}(consultingId = ${consulting.consultingId})}"
                      method="post">
                    <a>
                        <button type="submit">Annehmen</button>
                    </a>
                </form>
            </td>
        </tr>

    </table>
</div>
</body>
</html>